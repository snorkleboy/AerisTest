<h1 id="map-view-timeline" class="page-title">Map View Timeline</h1>
<p>Map views support displaying and animating weather data by using a time-based timeline, meaning a timeline with a specific start and end date. This means that you can configure your map view to display data for a specific period in time in the past, future or both. All active data layers visible on the map will be animated.</p>
<p>By default a weather map animation will repeat indefinitely with a longer delay at the end of the timeline before restarting from the beginning. An animation’s speed is controlled by both the maximum number of intervals allowed and the timeline’s date range. Since each map layer has differing update intervals and periods, each layer will appear to animate independent of each other. Thus, the total number of changes during an animation may vary between the different layers within a single animation.</p>
<p class="alert alert-info">Note that by default a map will only display past/current data for past/current timeline intervals and future data for future timeline intervals. However, you can change this behavior. See the <a href="#always-showing-past-andor-future-data">Always Showing Past and/or Future Data</a> section below for more information.</p>
<h3 id="defining-a-time-range">Defining a Time Range</h3>
<p>When you instantiate your map view, it’s setup using the default weather map configuration or with <a href="../configuration/">custom configuration options</a> you provide. This configuration object also configures the initial state of the map’s timeline, such as the start and end dates or times and the number of intervals to show while animating along the timeline.</p>
<p>You specify the start and end dates or times for your map’s timeline in your configuration by using time offsets relative to the current date and time when the map is initialized, in seconds. For instance, the default timeline configuration specifies a start time two (2) hours before the current time and an end time equal to the current time (offset of <code>0</code>):</p>
<pre class="language-javascript"><code>animation: {
    from: -2 * 3600,
    to: 0
}</code></pre>
<p class="alert alert-info">Note that these offset values must be provided in seconds.</p>
<p>The start and end dates or time intervals can either be in the past or future. However, there are some requirements:</p>
<ul>
	<li>The starting date/time offset must always be earlier than the ending date/time offset.</li>
	<li>The ending date/time offset must always be later than the starting date/time offset.</li>
</ul>
<p>You can also update the timeline after the map has already been initialized. Use the <code>setStartOffset()</code> and <code>setEndOffset()</code> methods, providing the offsets in seconds relative to now:</p>
<pre class="language-javascript"><code>const map = new views.Map(&#39;#mapview&#39;, {
    animation: {
        from: -2 * 3600,
        to: 0
    }
});

// update the timeline to start 6 hours ago
map.timeline.setStartOffset(-6 * 3600);

// update the timeline to end 2 hours from now
map.timeline.setEndOffset(2 * 3600);</code></pre>
<p>Alternatively, instead of offset time values you can also set the timeline range using dates using <code>setStartDate()</code> and <code>setEndDate()</code>, whose values can be <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date"><code>Date</code></a> objects or a number corresponding to the Epoch time in milliseconds:</p>
<pre class="language-javascript"><code>const map = new views.Map(&#39;#mapview&#39;, {
    animation: {
        from: -2 * 3600,
        to: 0
    }
});

// update the timeline start and end using dates
const start = new Date(2018, 10, 20, 17);
const end = new Date(2018, 10, 23, 17);
map.timeline.setStartDate(start);
map.timeline.setEndDate(end);</code></pre>
<p>Updating the start and/or end dates on your map’s timeline will stop any active animation and update the layers currently active on the weather map as needed to account for the time range change.</p>
<h3 id="showing-a-specific-time">Showing a Specific Time</h3>
<p>A map’s timeline also supports going to a specific time within its range, allowing you to display weather data for a particular point in time. Just use the <code>goToTime()</code> method on the map’s timeline instance and provide the <code>Date</code> or a number corresponding to the Epoch time in milliseconds:</p>
<pre class="language-javascript"><code>const map = new views.Map(&#39;#mapview&#39;, {
    animation: {
        from: -2 * 3600,
        to: 0
    }
});

// get the current time offset for the start position
const from = map.timeline.from;

// move the timeline position to 1 hour after the beginning, or 1 hour ago
map.timeline.goToTime(from + 3600);</code></pre>
<h3 id="always-showing-past-andor-future-data">Always Showing Past and/or Future Data</h3>
<p>By default, an interactive map will only show past/current data (radar, satellite, alerts, observations, etc) for current timeline intervals and those in the past. As such, a map will only show future data (such as forecasts, outlooks, etc) for future timeline intervals.</p>
<p>You may, however, want to always show past data for future intervals and/or future intervals for past data. This is often useful if you want to display an animation consisting of future data, such as future radar or forecast temperatures, that constains time intervals in the past relative to now.</p>
<p>To accomplish this, you just need to set the necessary <code>alwaysShowPast</code> and/or <code>alwaysShowFuture</code> properties on your map’s timeline configuration object. For instance, the following will always render future layers for timeline intervals in the past:</p>
<pre class="language-javascript"><code>const map = new views.Map(&#39;#mapview&#39;, {
    animation: {
        from: -12 * 3600,
        to: 6 * 3600,
        alwaysShowFuture: true
    }
});</code></pre>
<p>Note that most layers which represent observations or past data, such as current temperatures or road conditions, aren’t available for future time intervals and will result in invalid requests. Therefore, you’ll most likely only use the <code>alwaysShowFuture</code> option.</p>